{% doc %}
  Renders a group of blocks with configurable layout direction, gap and
  alignment.

  All settings apply to only one dimension to reduce configuration complexity.

  This component is a wrapper concerned only with rendering its children in
  the specified layout direction with appropriate padding and alignment.

  @example
  {% content_for 'block', type: 'group', id: 'group' %}
{% enddoc %}

<{{ block.settings.tag | default: 'div' }}
  class="group {{ block.settings.layout_direction }} {{ block.settings.class }}"
  style="
    --padding: {{ block.settings.padding }}px;
    --gap: {{ block.settings.gap }}px;
    --margin: {{ block.settings.margin }}px;
    --alignment: {{ block.settings.alignment }};
  "
  {% if block.settings.tag == 'a' and block.settings.url != blank %}
    href="{{ block.settings.url }}"
  {% endif %}
  {{ block.settings.attributes }}
  {{ block.shopify_attributes }}
>
  {% content_for 'blocks' %}
</{{ block.settings.tag | default: 'div' }}>

{% stylesheet %}
  .group {
    display: flex;
    flex-wrap: nowrap;
    overflow: hidden;
    width: 100%;
    gap: var(--gap);
    margin: var(--margin);
  }

  .group--horizontal {
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    padding: 0 var(--padding);
  }

  .group--vertical {
    flex-direction: column;
    align-items: var(--alignment);
    padding: var(--padding) 0;
  }
{% endstylesheet %}

{% schema %}
{
  "name": "t:general.group",
  "blocks": [{ "type": "@theme" }],
  "settings": [
    {
      "type": "select",
      "id": "tag",
      "label": "t:labels.tag",
      "default": "div",
      "options": [
        { "value": "div", "label": "Div" },
        { "value": "section", "label": "Section" },
        { "value": "article", "label": "Article" },
        { "value": "aside", "label": "Aside" },
        { "value": "nav", "label": "Nav" },
        { "value": "header", "label": "Header" },
        { "value": "footer", "label": "Footer" },
        { "value": "main", "label": "Main" },
        { "value": "a", "label": "Link (A)" }
      ]
    },
    {
      "visible_if": "{{ block.settings.tag == 'a' }}",
      "type": "url",
      "id": "url",
      "label": "t:labels.url",
      "info": "Link destination (required when using A tag)"
    },
    {
      "type": "select",
      "id": "layout_direction",
      "label": "t:labels.layout_direction",
      "default": "group--vertical",
      "options": [
        { "value": "group--horizontal", "label": "t:options.direction.horizontal" },
        { "value": "group--vertical", "label": "t:options.direction.vertical" }
      ]
    },
    {
      "visible_if": "{{ block.settings.layout_direction == 'group--vertical' }}",
      "type": "select",
      "id": "alignment",
      "label": "t:labels.alignment",
      "default": "flex-start",
      "options": [
        { "value": "flex-start", "label": "t:options.alignment.left" },
        { "value": "center", "label": "t:options.alignment.center" },
        { "value": "flex-end", "label": "t:options.alignment.right" }
      ]
    },
    {
      "type": "text",
      "id": "class",
      "label": "t:labels.class",
      "placeholder": "custom-class",
      "info": "Add custom CSS class names"
    },
    {
      "type": "text",
      "id": "attributes",
      "label": "t:labels.attributes",
      "placeholder": "id=\"my-id\" data-custom=\"value\"",
      "info": "Add custom HTML attributes"
    },
    {
      "type": "range",
      "id": "gap",
      "label": "t:labels.gap",
      "default": 0,
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "margin",
      "label": "t:labels.margin",
      "default": 0,
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "padding",
      "label": "t:labels.padding",
      "default": 0,
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px"
    }
  ],
  "presets": [
    {
      "name": "t:general.column",
      "category": "t:general.layout",
      "settings": {
        "tag": "div",
        "layout_direction": "group--vertical",
        "alignment": "flex-start",
        "gap": 8,
        "margin": 0,
        "padding": 0
      }
    },
    {
      "name": "t:general.row",
      "category": "t:general.layout",
      "settings": {
        "tag": "div",
        "layout_direction": "group--horizontal",
        "gap": 8,
        "margin": 0,
        "padding": 0
      }
    },
    {
      "name": "Link Group",
      "category": "t:general.layout",
      "settings": {
        "tag": "a",
        "url": "/collections/all",
        "layout_direction": "group--horizontal",
        "gap": 10,
        "margin": 0,
        "padding": 0
      }
    }
  ]
}
{% endschema %}
